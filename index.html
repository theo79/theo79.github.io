<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>3D Print Cost Estimator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      font-size: 14px;
    }
    .wrapper {
      display: flex;
      max-width: 800px;
      margin: auto;
      gap: 20px;
    }
    .left, .right {
      display: flex;
      flex-direction: column;
    }
    .left {
      flex: 4;
    }
    .right {
      flex: 3;
      justify-content: flex-start;
    }
    label {
      margin-top: 10px;
      font-weight: bold;
    }
    input, select {
      padding: 6px;
      margin: 5px 0;
      width: 100%;
      font-size: 13px;
    }
    button {
      margin-top: 15px;
      padding: 10px;
      background: blue;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }
    h3 {
      margin-top: 20px;
      font-size: 16px;
    }
    .suggestions {
      text-align: center;
      margin-top: 30px;
      font-size: 12px;
      color: #666;
    }
    .tooltip-icon {
      cursor: help;
      color: #007BFF;
      margin-left: 4px;
    }
    .tips-section {
      max-width: 800px;
      margin: 30px auto 10px auto;
      font-size: 13px;
      color: #444;
      display: none;
    }
    .tips-section h4 {
      margin-bottom: 10px;
      font-size: 15px;
      color: #222;
    }
    .tips-section ul {
      padding-left: 18px;
    }
    .tips-section li {
      margin-bottom: 8px;
      line-height: 1.4;
    }
    #downloadBtn {
      display: none;
      margin: 20px auto 0;
      max-width: 800px;
      background-color: green;
    }
  </style>
</head>
<body>
  <h2 style="text-align:center;">3D Print Cost Estimator</h2>

  <div style="max-width:800px; margin:auto;">
    <label>Project Name (optional):</label>
    <input type="text" id="projectName" placeholder="e.g., Phone Stand Prototype" />
  </div>

  <div class="wrapper">
    <div class="left">
      <label>Filament Cost (per kg) <span class="currency-label">[€]</span>:</label>
      <input type="number" id="filamentCost" placeholder="">

      <label>Filament Used (grams):</label>
      <input type="number" id="filamentUsed" placeholder="">

      <label>Electricity Cost (per kWh) <span class="currency-label">[€]</span>:</label>
      <input type="number" id="electricityCost" placeholder="">

      <label>Print Time (hours):</label>
      <input type="number" id="printTime" placeholder="">

      <label>
        Average Printer Power (W):
        <span class="tooltip-icon" title="Average wattage while printing. If unsure, 90–150 W is common for small FDM printers.">&#9432;</span>
      </label>
      <input type="number" id="avgWatts" placeholder="e.g., 120">

      <label>
        Hands-on Labor (minutes):
        <span class="tooltip-icon" title="Only the time you actually work: setup, filament change, cleanup.">&#9432;</span>
      </label>
      <input type="number" id="laborMinutes" placeholder="e.g., 20">

      <label>
        Labor Cost (per hour) <span class="currency-label">[€]</span>:
        <span class="tooltip-icon" title="Estimate your hourly rate or opportunity cost. E.g., 8–15€/hr.">&#9432;</span>
      </label>
      <input type="number" id="laborCost" placeholder="">

      <label>
        Machine Wear Cost (fixed) <span class="currency-label">[€]</span>:
        <span class="tooltip-icon" title="Typical range: 1–3€ depending on wear and maintenance.">&#9432;</span>
      </label>
      <input type="number" id="machineWear" placeholder="">
    </div>

    <div class="right">
      <label>Currency:</label>
      <select id="currencySelect" onchange="updateCurrency()">
        <option value="€" selected>Euro (€)</option>
        <option value="$">US Dollar ($)</option>
      </select>

      <label>Profit Margin (%):</label>
      <input type="number" id="profitMargin" value="20">

      <button onclick="calculateCost()">Calculate</button>
      <h3>Total Cost: <span id="currencySymbol">€</span><span id="totalCost">0.00</span></h3>
    </div>
  </div>

  <div class="tips-section">
    <h4>Helpful Tips</h4>
    <ul id="tipsList"></ul>
  </div>

  <div style="text-align:center;">
    <button id="downloadBtn" onclick="downloadPDF()">Download as PDF</button>
  </div>

  <div class="suggestions">
    Suggestions: <a href="mailto:projects.theo79@gmail.com">projects.theo79@gmail.com</a>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    function updateCurrency() {
      const currency = document.getElementById('currencySelect').value;
      document.getElementById('currencySymbol').innerText = currency;
      const labels = document.querySelectorAll('.currency-label');
      labels.forEach(label => label.innerText = `[${currency}]`);
      calculateCost();
    }

    function calculateCost() {
      const currency = document.getElementById('currencySelect').value;

      const filamentCost = parseFloat(document.getElementById('filamentCost').value) || 0;
      const filamentUsed = parseFloat(document.getElementById('filamentUsed').value) || 0;
      const electricityCost = parseFloat(document.getElementById('electricityCost').value) || 0;
      const printTime = parseFloat(document.getElementById('printTime').value) || 0;
      const avgWatts = parseFloat(document.getElementById('avgWatts').value) || 0;
      const laborRate = parseFloat(document.getElementById('laborCost').value) || 0;
      const laborMinutes = parseFloat(document.getElementById('laborMinutes').value) || 0;
      const machineWear = parseFloat(document.getElementById('machineWear').value) || 0;
      const profitMargin = parseFloat(document.getElementById('profitMargin').value) || 0;

      const filamentExpense = (filamentCost / 1000) * filamentUsed;
      const electricityExpense = (avgWatts > 0) ? (avgWatts / 1000) * printTime * electricityCost : 0;
      const laborHours = laborMinutes / 60;
      const laborExpense = laborRate * laborHours;

      let subtotal = filamentExpense + electricityExpense + laborExpense + machineWear;
      let total = subtotal + (subtotal * (profitMargin / 100));

      document.getElementById('totalCost').innerText = total.toFixed(2);
      document.getElementById('currencySymbol').innerText = currency;

      updateTips(filamentCost, profitMargin, laborRate);
      document.querySelector('.tips-section').style.display = 'block';
      document.getElementById('downloadBtn').style.display = 'inline-block';
    }

    function updateTips(filamentCost, profitMargin, laborCost) {
      const tips = [];
      if (filamentCost > 25) {
        tips.push("You're using premium material — consider showing this to clients.");
      } else if (filamentCost < 15) {
        tips.push("That’s a low filament price — check if it’s per kg.");
      }
      if (profitMargin > 80) {
        tips.push("High profit margins may deter buyers. 20–50% is more common.");
      } else if (profitMargin < 5) {
        tips.push("Low margins can eat into your costs. Cover all expenses.");
      }
      if (laborCost > 20) {
        tips.push("High labor rate? Break it down into design/setup/maintenance time.");
      }
      if (tips.length === 0) {
        tips.push("PLA is often cheapest (~20€/kg), PETG and ABS cost slightly more.");
        tips.push("Profit Margin covers risks and income. Typical: 10–50%.");
        tips.push("Labor Cost reflects your time, hourly rate, or freelance value.");
      }
      const tipsList = document.getElementById("tipsList");
      tipsList.innerHTML = "";
      tips.forEach((tip) => {
        const li = document.createElement("li");
        li.textContent = tip;
        tipsList.appendChild(li);
      });
    }

    async function downloadPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      const currency = document.getElementById('currencySelect').value;
      const totalCost = document.getElementById('totalCost').innerText;
      const projectName = document.getElementById('projectName').value || "Untitled Project";

      const filamentCost = document.getElementById('filamentCost').value;
      const filamentUsed = document.getElementById('filamentUsed').value;
      const electricityCost = document.getElementById('electricityCost').value;
      const printTime = document.getElementById('printTime').value;
      const avgWatts = document.getElementById('avgWatts').value;
      const laborMinutes = document.getElementById('laborMinutes').value;
      const laborCost = document.getElementById('laborCost').value;
      const machineWear = document.getElementById('machineWear').value;
      const profitMargin = document.getElementById('profitMargin').value;

      const timestamp = new Date().toLocaleString();
      let y = 10;
      doc.setFontSize(14);
      doc.text("3D Print Cost Estimate", 10, y); y += 8;
      doc.setFontSize(11);
      doc.text(`Project: ${projectName}`, 10, y); y += 6;
      doc.text(`Generated on: ${timestamp}`, 10, y); y += 8;

      doc.text(`Filament Cost: ${filamentCost} ${currency}/kg`, 10, y); y += 6;
      doc.text(`Filament Used: ${filamentUsed} g`, 10, y); y += 6;
      doc.text(`Electricity Cost: ${electricityCost} ${currency}/kWh`, 10, y); y += 6;
      doc.text(`Print Time: ${printTime} hrs`, 10, y); y += 6;
      doc.text(`Avg Printer Power: ${avgWatts} W`, 10, y); y += 6;
      doc.text(`Hands-on Labor: ${laborMinutes} min`, 10, y); y += 6;
      doc.text(`Labor Cost Rate: ${laborCost} ${currency}/hr`, 10, y); y += 6;
      doc.text(`Machine Wear: ${machineWear} ${currency}`, 10, y); y += 6;
      doc.text(`Profit Margin: ${profitMargin}%`, 10, y); y += 6;

      y += 4;
      doc.setFontSize(12);
      doc.text(`Total Cost: ${currency}${totalCost}`, 10, y); y += 10;

      const tips = document.querySelectorAll('#tipsList li');
      doc.setFontSize(11);
      doc.text("Helpful Tips:", 10, y); y += 6;
      tips.forEach((tip) => {
        const lines = doc.splitTextToSize("- " + tip.textContent, 180);
        doc.text(lines, 10, y);
        y += lines.length * 6;
      });

      doc.save(`${projectName.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_cost.pdf`);
    }

    window.onload = calculateCost;
  </script>

  <script src='https://storage.ko-fi.com/cdn/scripts/overlay-widget.js'></script>
  <script>
    kofiWidgetOverlay.draw('theo79', {
      'type': 'floating-chat',
      'floating-chat.donateButton.text': 'Tip Me',
      'floating-chat.donateButton.background-color': '#00b9fe',
      'floating-chat.donateButton.text-color': '#fff'
    });
  </script>
</body>
</html>








